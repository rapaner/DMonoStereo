# Changelog

## [1.2] - Суммарная продолжительность альбомов и рефакторинг

### Добавлено
- Вычисляемое свойство `TotalDuration` в модели `Album` для получения суммарной продолжительности всех треков альбома
- Свойство `TotalDurationText` в `AlbumViewModel` для отображения суммарной продолжительности в текстовом виде
- Свойство `HasTotalDuration` в `AlbumViewModel` для проверки наличия суммарной продолжительности
- Класс `TimeSpanHelpers` в папке `Helpers` с методами для работы с форматированием и парсингом длительности:
  - `FormatDuration` - форматирует продолжительность в секундах в строку формата "мм:сс" или "ч:мм:сс"
  - `TryParseDuration` - парсит строку длительности в секунды (поддерживает форматы "мм:сс", "ч:мм:сс" или просто число секунд)
- Отображение суммарной продолжительности альбома на странице деталей альбома (`AlbumDetailPage`)
- Отображение суммарной продолжительности альбома на странице деталей артиста (`ArtistDetailPage`)

### Изменено
- `Album.Computed.cs`:
  - Добавлено вычисляемое свойство `TotalDuration` для расчета суммарной продолжительности треков альбома
  
- `AlbumViewModel.cs`:
  - Добавлены свойства `TotalDurationText` и `HasTotalDuration`
  - Обновлен метод создания ViewModel для расчета и форматирования суммарной продолжительности
  
- `AddEditTrackPage.xaml.cs`:
  - Удалены дублирующиеся методы `FormatDuration` и `TryParseDuration`
  - Используется класс `TimeSpanHelpers` для работы с длительностью
  
- `EditableTrackViewModel.cs`:
  - Удалены дублирующиеся методы `FormatDuration` и `TryParseDuration`
  - Используется класс `TimeSpanHelpers` для работы с длительностью
  
- `AlbumDetailPage.xaml.cs`:
  - Добавлена логика отображения суммарной продолжительности альбома
  - Используется `TimeSpanHelpers.FormatDuration` для форматирования
  
- `AlbumDetailPage.xaml`:
  - Добавлен элемент `TotalDurationLabel` для отображения суммарной продолжительности
  
- `ArtistDetailPage.xaml`:
  - Добавлено отображение суммарной продолжительности альбома в списке альбомов артиста

### Рефакторинг
- Вынесены методы работы с длительностью (`FormatDuration` и `TryParseDuration`) из `AddEditTrackPage` и `EditableTrackViewModel` в общий класс `TimeSpanHelpers` для устранения дублирования кода

## [1.1] - Постраничная загрузка треков

### Добавлено
- Постраничная загрузка треков на странице "Все треки" (AllTracksPage)
  - Треки загружаются порциями по 50 штук при прокрутке списка
  - Автоматическая загрузка следующей страницы при достижении конца списка
  - Метод `GetTracksPageAsync` в `MusicService` для постраничной выборки треков из базы данных

### Изменено
- `AllTracksPage.xaml.cs`:
  - Добавлена поддержка пагинации с размером страницы 50 треков
  - Метод `LoadTracksAsync` переработан для поддержки постраничной загрузки
  - Добавлен обработчик `OnRemainingItemsThresholdReached` для автоматической загрузки следующей страницы
  - При изменении фильтра или сортировки происходит сброс пагинации и загрузка с первой страницы
  
- `AllTracksPage.xaml`:
  - Добавлены атрибуты `RemainingItemsThreshold="0"` и `RemainingItemsThresholdReached` в `CollectionView` для реализации пагинации

- `MusicService.cs`:
  - Добавлен метод `GetTracksPageAsync` для постраничной выборки треков с поддержкой фильтрации и сортировки

