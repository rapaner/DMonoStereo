<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:yd="clr-namespace:YandexDisk.Client.Protocol;assembly=YandexDisk.Client"
             x:Class="DMonoStereo.Views.YandexDiskPage"
             Title="Ð¯Ð½Ð´ÐµÐºÑ Ð”Ð¸ÑÐº"
             BackgroundColor="{DynamicResource PageBackgroundColor}">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">
            <Border BackgroundColor="{DynamicResource PrimaryColor}" Padding="15" StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <Label Text="Ð¡Ñ‚Ð°Ñ‚ÑƒÑ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¸Ñ"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource SecondaryTextColor}" />
                    <Label x:Name="StatusLabel"
                           Text="ÐÐµ Ð¿Ð¾Ð´ÐºÐ»ÑŽÑ‡ÐµÐ½Ð¾"
                           FontSize="14"
                           TextColor="{DynamicResource SecondaryTextColor}" />
                    <Label x:Name="DiskInfoLabel"
                           Text=""
                           FontSize="12"
                           TextColor="{DynamicResource SecondaryTextColor}"
                           IsVisible="False" />
                </VerticalStackLayout>
            </Border>

            <Border BackgroundColor="{DynamicResource CardBackgroundColor}" Padding="15" StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <Label Text="ÐÐ²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ñ"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryTextColor}" />

                    <Button Text="ðŸŒ ÐžÑ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€ Ð´Ð»Ñ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Clicked="OnGetTokenClicked" />

                    <Label Text="ÐŸÐ¾ÑÐ»Ðµ Ð°Ð²Ñ‚Ð¾Ñ€Ð¸Ð·Ð°Ñ†Ð¸Ð¸ ÑÐºÐ¾Ð¿Ð¸Ñ€ÑƒÐ¹Ñ‚Ðµ Ñ‚Ð¾ÐºÐµÐ½ Ð¸Ð· Ð°Ð´Ñ€ÐµÑÐ½Ð¾Ð¹ ÑÑ‚Ñ€Ð¾ÐºÐ¸ Ð±Ñ€Ð°ÑƒÐ·ÐµÑ€Ð°"
                           FontSize="12"
                           TextColor="{DynamicResource SecondaryTextColor}"
                           HorizontalOptions="Center" />

                    <Entry x:Name="TokenEntry"
                           Style="{StaticResource EntryStyle}"
                           Placeholder="Ð’ÑÑ‚Ð°Ð²ÑŒÑ‚Ðµ OAuth Ñ‚Ð¾ÐºÐµÐ½"
                           IsPassword="True" />

                    <HorizontalStackLayout Spacing="10">
                        <Button Text="Ð¡Ð¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ñ‚Ð¾ÐºÐµÐ½"
                                Style="{StaticResource PrimaryButtonStyle}"
                                HorizontalOptions="FillAndExpand"
                                Clicked="OnSaveTokenClicked" />
                        <Button Text="ÐžÑ‚ÐºÐ»ÑŽÑ‡Ð¸Ñ‚ÑŒ"
                                Style="{StaticResource SecondaryButtonStyle}"
                                HorizontalOptions="FillAndExpand"
                                Clicked="OnDisconnectClicked" />
                    </HorizontalStackLayout>
                </VerticalStackLayout>
            </Border>

            <Border BackgroundColor="{DynamicResource CardBackgroundColor}" Padding="15" StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <Label Text="Ð ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ðµ ÐºÐ¾Ð¿Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ"
                           FontSize="18"
                           FontAttributes="Bold"
                           TextColor="{DynamicResource PrimaryTextColor}" />

                    <Label x:Name="LastBackupLabel"
                           Text="ÐŸÐ¾ÑÐ»ÐµÐ´Ð½ÑÑ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð°Ñ ÐºÐ¾Ð¿Ð¸Ñ: Ð½Ð¸ÐºÐ¾Ð³Ð´Ð°"
                           FontSize="14"
                           TextColor="{DynamicResource SecondaryTextColor}" />

                    <Button Text="Ð¡Ð¾Ð·Ð´Ð°Ñ‚ÑŒ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½ÑƒÑŽ ÐºÐ¾Ð¿Ð¸ÑŽ"
                            Style="{StaticResource PrimaryButtonStyle}"
                            Clicked="OnBackupClicked" />

                    <Button Text="Ð’Ð¾ÑÑÑ‚Ð°Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ Ð¸Ð· Ñ€ÐµÐ·ÐµÑ€Ð²Ð½Ð¾Ð¹ ÐºÐ¾Ð¿Ð¸Ð¸"
                            Style="{StaticResource SecondaryButtonStyle}"
                            Clicked="OnRestoreClicked" />

                    <Button Text="Ð£Ð´Ð°Ð»Ð¸Ñ‚ÑŒ Ñ€ÐµÐ·ÐµÑ€Ð²Ð½ÑƒÑŽ ÐºÐ¾Ð¿Ð¸ÑŽ"
                            BackgroundColor="{DynamicResource ErrorColor}"
                            TextColor="{DynamicResource PrimaryTextColor}"
                            Clicked="OnDeleteBackupClicked" />
                </VerticalStackLayout>
            </Border>

            <Border BackgroundColor="{DynamicResource CardBackgroundColor}" Padding="15" StrokeThickness="0">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="10" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <HorizontalStackLayout Spacing="10">
                        <Label Text="Ð ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸"
                               FontSize="18"
                               FontAttributes="Bold"
                               TextColor="{DynamicResource PrimaryTextColor}" />
                        <Button Text="ÐžÐ±Ð½Ð¾Ð²Ð¸Ñ‚ÑŒ"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Clicked="OnRefreshBackupsClicked" />
                    </HorizontalStackLayout>

                    <ActivityIndicator x:Name="LoadingIndicator"
                                       IsRunning="False"
                                       IsVisible="False"
                                       Color="{DynamicResource PrimaryColor}" />

                    <CollectionView x:Name="BackupsCollectionView"
                                    SelectionMode="Single"
                                    SelectionChanged="OnBackupSelectionChanged">
                        <CollectionView.ItemTemplate>
                            <DataTemplate x:DataType="yd:Resource">
                                <Border Padding="10"
                                       Margin="0,5"
                                       BackgroundColor="{DynamicResource Gray100}"
                                       StrokeThickness="2"
                                       Stroke="Transparent">
                                    <Border.StrokeShape>
                                        <RoundRectangle CornerRadius="5" />
                                    </Border.StrokeShape>
                                    <VerticalStackLayout Spacing="5">
                                        <Label Text="{Binding Name}"
                                               FontSize="14"
                                               FontAttributes="Bold"
                                               TextColor="{DynamicResource PrimaryTextColor}" />
                                        <Label Text="{Binding Created, StringFormat='Ð¡Ð¾Ð·Ð´Ð°Ð½Ð¾: {0:dd.MM.yyyy HH:mm}'}"
                                               FontSize="12"
                                               TextColor="{DynamicResource SecondaryTextColor}" />
                                        <Label Text="{Binding Size, StringFormat='Ð Ð°Ð·Ð¼ÐµÑ€: {0:N0} Ð±Ð°Ð¹Ñ‚'}"
                                               FontSize="12"
                                               TextColor="{DynamicResource SecondaryTextColor}" />
                                    </VerticalStackLayout>
                                </Border>
                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <Label x:Name="NoBackupsLabel"
                           Text="Ð ÐµÐ·ÐµÑ€Ð²Ð½Ñ‹Ðµ ÐºÐ¾Ð¿Ð¸Ð¸ Ð½Ðµ Ð½Ð°Ð¹Ð´ÐµÐ½Ñ‹"
                           FontSize="14"
                           TextColor="{DynamicResource SecondaryTextColor}"
                           HorizontalOptions="Center"
                           IsVisible="False" />
                </VerticalStackLayout>
            </Border>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
